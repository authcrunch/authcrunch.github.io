"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7308],{1198:(t,e,i)=>{i.d(e,{A:()=>n});const n=i.p+"assets/images/oauth_gitlab_new_app_1-4567558852ea972284c18ed444d756ff.png"},2920:(t,e,i)=>{i.r(e),i.d(e,{assets:()=>r,contentTitle:()=>c,default:()=>d,frontMatter:()=>o,metadata:()=>n,toc:()=>h});const n=JSON.parse('{"id":"authenticate/oauth/backend-oauth2-0009-gitlab","title":"Gitlab","description":"Whether you are using gitlab.com or hosting your own Gitlab instance","source":"@site/docs/authenticate/oauth/81-backend-oauth2-0009-gitlab.md","sourceDirName":"authenticate/oauth","slug":"/authenticate/oauth/backend-oauth2-0009-gitlab","permalink":"/docs/authenticate/oauth/backend-oauth2-0009-gitlab","draft":false,"unlisted":false,"editUrl":"https://github.com/authcrunch/authcrunch.github.io/edit/main/docs/authenticate/oauth/81-backend-oauth2-0009-gitlab.md","tags":[],"version":"current","sidebarPosition":81,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Facebook","permalink":"/docs/authenticate/oauth/backend-oauth2-0008-facebook"},"next":{"title":"Ping Identity","permalink":"/docs/authenticate/oauth/backend-oauth2-0010-pingid"}}');var a=i(4848),s=i(8453);const o={},c="Gitlab",r={},h=[];function l(t){const e={a:"a",code:"code",h1:"h1",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...t.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.header,{children:(0,a.jsx)(e.h1,{id:"gitlab",children:"Gitlab"})}),"\n",(0,a.jsxs)(e.p,{children:["Whether you are using gitlab.com or hosting your own Gitlab instance\n(e.g. at ",(0,a.jsx)(e.code,{children:"gitlab.contoso.com"}),"), create a new app by browsing to\none of the following URLs:"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.code,{children:"https://gitlab.contoso.com/-/profile/applications"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.code,{children:"https://gitlab.com/-/profile/applications"})}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{alt:"Gitlab - New Application",src:i(1198).A+"",width:"1286",height:"484"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{alt:"Gitlab - New Application - Scopes",src:i(6949).A+"",width:"1285",height:"493"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{alt:"Gitlab - New Application - Review",src:i(6949).A+"",width:"1285",height:"493"})}),"\n",(0,a.jsxs)(e.p,{children:["The following ",(0,a.jsx)(e.a,{href:"https://github.com/greenpau/caddy-auth-docs/blob/main/assets/conf/oauth/gitlab/Caddyfile",children:(0,a.jsx)(e.code,{children:"Caddyfile"})}),"\nallows Gitlab-based authentication."]}),"\n",(0,a.jsxs)(e.p,{children:["By default, Gitlab groups are not included into the token, unless\nthe ",(0,a.jsx)(e.code,{children:"user_group_filters"})," directive is being user in the configuration."]}),"\n",(0,a.jsxs)(e.p,{children:["The following directives instruct the portal to add the groups having\n",(0,a.jsx)(e.code,{children:"barfoo"})," in their name and the groups whose names start with the ",(0,a.jsx)(e.code,{children:"a"}),"."]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"          user_group_filters barfoo\n          user_group_filters ^a\n"})}),"\n",(0,a.jsx)(e.p,{children:"In this case, the groups making it to the JWT token are:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:'    "gitlab.contoso.com/barfoo",\n    "gitlab.contoso.com/a-private-group/a-subgroup"\n'})}),"\n",(0,a.jsx)(e.p,{children:"When a user browses to the app and clicks Gitlab link, the user is being redirected to\nGitlab instance."}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{alt:"Gitlab - Initiate Login",src:i(7816).A+"",width:"491",height:"257"})}),"\n",(0,a.jsx)(e.p,{children:"The user should click Authorize to continue."}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{alt:"Gitlab - Authorize App",src:i(4245).A+"",width:"772",height:"671"})}),"\n",(0,a.jsx)(e.p,{children:'Once logged in, the user may browse to "My Identity".'}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{alt:"Gitlab - Portal",src:i(5164).A+"",width:"445",height:"411"})}),"\n",(0,a.jsx)(e.p,{children:"The relevant Gitlab data became a part of the JWT token issued by the portal."}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{alt:"Gitlab - User Identity",src:i(8726).A+"",width:"650",height:"899"})})]})}function d(t={}){const{wrapper:e}={...(0,s.R)(),...t.components};return e?(0,a.jsx)(e,{...t,children:(0,a.jsx)(l,{...t})}):l(t)}},4245:(t,e,i)=>{i.d(e,{A:()=>n});const n=i.p+"assets/images/oauth_gitlab_authorize_app_1-7e41af7ba3ce0c676a48989881a12423.png"},5164:(t,e,i)=>{i.d(e,{A:()=>n});const n=i.p+"assets/images/oauth_gitlab_portal-c054fd1d2fe93929e32a6fbdd84524d6.png"},6949:(t,e,i)=>{i.d(e,{A:()=>n});const n=i.p+"assets/images/oauth_gitlab_new_app_2-1fedbc99257e5dbb51aa1ecd3d210dd7.png"},7816:(t,e,i)=>{i.d(e,{A:()=>n});const n=i.p+"assets/images/oauth_gitlab_init-62a698a1df6b89dfa8102452379b4b01.png"},8453:(t,e,i)=>{i.d(e,{R:()=>o,x:()=>c});var n=i(6540);const a={},s=n.createContext(a);function o(t){const e=n.useContext(s);return n.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function c(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(a):t.components||a:o(t.components),n.createElement(s.Provider,{value:e},t.children)}},8726:(t,e,i)=>{i.d(e,{A:()=>n});const n=i.p+"assets/images/oauth_gitlab_user_identity-da001e781f1ed3874f612840e6c3ac94.png"}}]);