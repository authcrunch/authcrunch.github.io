"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3651],{999:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/okta_configure_scope_04-9ac3bbb1aed49cfa8f65a32fb353b6a5.png"},1203:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/oauth2_okta_app_settings_01-cb8aab2747db59c6d9da9477c631aa52.png"},1211:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"authenticate/oauth/backend-oauth2-0001-okta","title":"Okta","description":"Create an \\"Application,\\" by browsing to \\"Applications\\" and clicking","source":"@site/docs/authenticate/oauth/81-backend-oauth2-0001-okta.md","sourceDirName":"authenticate/oauth","slug":"/authenticate/oauth/backend-oauth2-0001-okta","permalink":"/docs/authenticate/oauth/backend-oauth2-0001-okta","draft":false,"unlisted":false,"editUrl":"https://github.com/authcrunch/authcrunch.github.io/edit/main/docs/authenticate/oauth/81-backend-oauth2-0001-okta.md","tags":[],"version":"current","sidebarPosition":81,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Generic Provider","permalink":"/docs/authenticate/oauth/backend-oauth2-0000-generic"},"next":{"title":"Google Identity Platform","permalink":"/docs/authenticate/oauth/backend-oauth2-0002-google"}}');var s=t(4848),a=t(8453);const c={},o="Okta",l={},d=[];function r(e){const n={a:"a",code:"code",h1:"h1",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"okta",children:"Okta"})}),"\n",(0,s.jsx)(n.p,{children:'Create an "Application," by browsing to "Applications" and clicking\n"Add Application" button.'}),"\n",(0,s.jsx)(n.p,{children:'For a website, the choice is "Web".'}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Okta Developer - New App Choice",src:t(5010).A+"",width:"1038",height:"571"})}),"\n",(0,s.jsx)(n.p,{children:"Provided your application is running on localhost port 8443, provide the following\ninformation:"}),"\n",(0,s.jsx)(n.p,{children:"Base URI entries:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"https://myapp.localdomain.local:8443/"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"https://localhost:8443/"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Login redirect URIs:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"https://myapp.localdomain.local:8443/auth/oauth2/okta/authorization-code-callback"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"https://localhost:8443/auth/oauth2/okta/authorization-code-callback"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Logout redirect URIs:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"https://myapp.localdomain.local:8443/auth/logout"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"https://localhost:8443/auth/logout"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Group Assignments:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Everyone"}),"\n",(0,s.jsx)(n.li,{children:"Viewer"}),"\n",(0,s.jsx)(n.li,{children:"Editor"}),"\n",(0,s.jsx)(n.li,{children:"Administrator"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Grant type allowed:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Client acting on behalf of itself","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Client Credentials: No"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Client acting on behalf of a user","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Authorization Code: Yes"}),"\n",(0,s.jsx)(n.li,{children:"Refresh Token: No"}),"\n",(0,s.jsx)(n.li,{children:"Implicit (Hybrid): No"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Okta Developer - New App Setup",src:t(7126).A+"",width:"1011",height:"888"})}),"\n",(0,s.jsx)(n.p,{children:"Review the newly created application."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Okta Developer - Settings - General",src:t(1203).A+"",width:"734",height:"874"})}),"\n",(0,s.jsx)(n.p,{children:"Store the credentials securely."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Okta Developer - Settings - Client Credentials",src:t(9224).A+"",width:"732",height:"331"})}),"\n",(0,s.jsx)(n.p,{children:"Review default Sign On Policy."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Okta Developer - Settings - Sign On",src:t(7617).A+"",width:"741",height:"713"})}),"\n",(0,s.jsxs)(n.p,{children:["By default, the default Authorization Server has no ",(0,s.jsx)(n.code,{children:"groups"})," scope."]}),"\n",(0,s.jsx)(n.p,{children:'Therefore, browse to "API", "Authorization Servers" and select "default".'}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Okta Developer - API",src:t(2697).A+"",width:"822",height:"282"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Okta Developer - API",src:t(8162).A+"",width:"669",height:"311"})}),"\n",(0,s.jsx)(n.p,{children:'Next, browse to "Scopes" and click "Add Scope".'}),"\n",(0,s.jsx)(n.p,{children:'Fill out the "Add Scope" form:'}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Name: ",(0,s.jsx)(n.code,{children:"groups"})]}),"\n",(0,s.jsxs)(n.li,{children:["Description: ",(0,s.jsx)(n.code,{children:"This allows the app to view your group memberships."})]}),"\n",(0,s.jsx)(n.li,{children:'Check "Set as a default scope"'}),"\n",(0,s.jsx)(n.li,{children:'Check "Include in public metadata"'}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Okta Developer - Add Scope",src:t(5643).A+"",width:"940",height:"581"})}),"\n",(0,s.jsx)(n.p,{children:'Next, browse to "Claims" and click "Add Claim".'}),"\n",(0,s.jsx)(n.p,{children:'Fill out the "Add Claim" form:'}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Name: ",(0,s.jsx)(n.code,{children:"groups"})]}),"\n",(0,s.jsx)(n.li,{children:'Include in token type: "ID Token", "Always"'}),"\n",(0,s.jsx)(n.li,{children:"Value type: Groups"}),"\n",(0,s.jsxs)(n.li,{children:["Filter: Matches ",(0,s.jsx)(n.code,{children:".*"})," regex"]}),"\n",(0,s.jsx)(n.li,{children:'Include in: The "groups" scope'}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Okta Developer - Add Scope",src:t(999).A+"",width:"861",height:"672"})}),"\n",(0,s.jsxs)(n.p,{children:["Next, review ",(0,s.jsx)(n.a,{href:"https://developer.okta.com/docs/reference/api/oidc/#get-started",children:"Okta OpenID Connect and OAuth 2.0 API - Get Started"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["The following ",(0,s.jsx)(n.a,{href:"https://github.com/greenpau/caddy-auth-docs/blob/main/assets/conf/oauth/okta/Caddyfile",children:(0,s.jsx)(n.code,{children:"Caddyfile"})}),"\nallows Okta-based authentication."]}),"\n",(0,s.jsxs)(n.p,{children:["Provided the Okta domain is ",(0,s.jsx)(n.code,{children:"dev-680653.okta.com"}),", the authorization server is\n",(0,s.jsx)(n.code,{children:"default"}),", and Client ID is ",(0,s.jsx)(n.code,{children:"0oa121qw81PJW0Tj34x7"}),", check OpenID configuration:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -X GET "https://dev-680653.okta.com/oauth2/default/.well-known/openid-configuration?client_id=0oa121qw81PJW0Tj34x7" | jq\n'})}),"\n",(0,s.jsxs)(n.p,{children:["By default, the plugin logs public keys from ",(0,s.jsx)(n.code,{children:"keys"})," endpoint."]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(r,{...e})}):r(e)}},2697:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/okta_configure_scope_01-9de32f739e34786808d75ff95f056b64.png"},5010:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/oauth2_okta_new_app_choice-032773eae345af9c5899692f2414699a.png"},5643:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/okta_configure_scope_03-9460eda92fb8c8ed5be0b68e13f23c63.png"},7126:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/oauth2_okta_new_app-91fc606bb0ef98a6c2ba4723b674009d.png"},7617:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/oauth2_okta_app_settings_03-16b1704a792f91f2d4d9915400fc2ca0.png"},8162:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/okta_configure_scope_02-852aa26443d9677e26cef7f321e9ffc4.png"},8453:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>o});var i=t(6540);const s={},a=i.createContext(s);function c(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),i.createElement(a.Provider,{value:n},e.children)}},9224:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/oauth2_okta_app_settings_02-329a69e1ff770d7a21ae518e72f71592.png"}}]);